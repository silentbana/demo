<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="../assets/css/style.css" />
  <link rel="stylesheet" href="../assets/css/bootstrap.css" />
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="../assets/js/bootstrap.js"></script>
  <title>登入</title>
</head>

<body>
  <nav class="navbar fixed-top">
    <div class=" container-fluid">
    <div class="d-flex align-items-center text-black">
      <a href="https://www.luxgen-motor.com.tw/" target="_blank">
        <img class="logo" src="../assets/image/logo@3x.png" alt="logo">
      </a>

      <ul class="d-none d-md-flex nav">
        <li class="nav-item">
          <a class="nav-link active font-14" aria-current="page" href="/">入主純電未來</a>
        </li>
        <li class="nav-item">
          <a class="nav-link font-14" href="/activity">活動專區</a>
        </li>
        <li class="nav-item">
          <a class="nav-link font-14" href="/order">訂單查詢</a>
        </li>
      </ul>
    </div>


    <button class="d-block d-md-none navbar-toggler" type="button" data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="login-area d-flex align-items-center">
      <img class="login-icon" src="../assets/image/icon_user_black.svg" alt="登入">
      <div class="text-black" role="button">登入</div>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Offcanvas</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
        </ul>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </div>
    </div>
  </nav>
  <main class="login text-232323">
    <div class="login-input">
      <h1 class="text-center mb-5">訂單查詢</h1>
      <form id="login-form" action="javascript:submitForm()" novalidate>
        <div class="col-8">
          <label for="email" class="form-label">手機號碼</label>
          <input id="email" class="form-control" placeholder="請輸入手機號碼十碼" type="text" value="" onchange="phoneNumber(this.value)" required>
          <div class="invalid-feedback">*請輸入手機號碼</div>
        </div>

        <div class="input-group justify-content-center col-8">
          <div class="v-code-input">
            <label for="v-code" class="form-label">簡訊驗證碼</label>
            <input id="v-code" class="form-control" placeholder="請輸入六碼驗證碼" type="text" required>
            <div class="invalid-feedback">*請輸入簡訊驗證碼</div>
          </div>
          <div class="v-code-btn">
            <div class="form-label" style="height: 24px;"></div>
            <button type="button" class="btn bg-41dec2" id="send" onclick="sendMessages()" disabled>發送驗證碼</button>
            <button type="button" class="btn bg-41dec2" id="countdown" hidden disabled>02:30</button>
            <button type="button" class="btn bg-41dec2" id="resend" onclick="resendMessages()" hidden>重新發送</button>
          </div>
        </div>
        
        <button type="submit" class="btn btn-lg bg-41dec2 col-4 d-block">確認</button>
      </form>
    </div>
  </main>
</body>

</html>

<script>
  $(document).ready(function () {
  });

  const number = ''
  const countdown = document.getElementById('countdown')

  const phoneNumber = (value) => {
    this.number = value
    if (value.length>0) $('#send').removeAttr('disabled')
  }

  const sendMessages = () => {
    $('#send').hide();
    $('#countdown').removeAttr('hidden')
    countdownFuncton(new Date().getTime() + 150100)   
  }

  const resendMessages = () => {
    $('#resend').hide();
    $('#countdown').show();
    countdownFuncton(new Date().getTime() + 150100)   
  }

  const countdownFuncton = (time) => {
    fun = setInterval(function () {
      console.log(new Date().getTime());
      const current_time = new Date().getTime();
      const seconds_left = (time - current_time) / 1000;
      
      if (seconds_left > 1) {
        minutes = parseInt(seconds_left / 60);
        seconds = parseInt(seconds_left % 60);
        const timestr = minutes.toString().padStart(2, '0') + ':' + seconds.toString().padStart(2, '0');
        this.countdown.innerHTML = timestr
      } else {
        $('#resend').removeAttr('hidden');
        $('#resend').show();
        this.countdown.innerHTML = '02:30'
        $('#countdown').hide();
        clearInterval(fun);
      }
    }, 1000);
  }

  [...document.querySelectorAll('#login-form')]
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })

  const submitForm = () => {
    console.log('submitForm');
  }

</script>

<style>
  /* navbar */
  .navbar {
    backdrop-filter: blur(5px);
    background: rgba(255, 255, 255, 0.4);
  }

  .logo {
    height: 24px;
    padding: 0 10px;
  }

  .login-area {
    padding-right: 10px;
  }

  .login-icon {
    width: 18px;
    height: 18px;
    margin-right: 10px;
  }
  
  /* login */
  .login {
    height: 100vh;
    padding-top: 60px;
    background-color: #f2f2f2;
    background-image: url(/assets/image/login_background.png);
    background-position: left bottom;
    background-repeat: no-repeat;
  }

  .login-input {
    margin: 80px 170px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background-color: rgba(255, 255, 255, 0.3);
    padding: 40px 0 72px;
  }

  form>div {
    margin: 40px auto 0px;
  }

  form>button {
    margin: 72px auto 0px;
  }

  .v-code-input {
    width: calc(66.6% - 133px);
    margin-right: 10px;
  }
  
  .v-code-btn>button {
    width: 123px;
  }

  label>button {
    background-color: #fff;
    padding-left: 16px;
    border: none;
  }

  @media (min-width: 1200px) {}

  @media (min-width: 768px) and (max-width: 1199px) {}
</style>